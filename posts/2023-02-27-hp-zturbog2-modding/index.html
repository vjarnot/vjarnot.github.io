<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Modding the HP Z Turbo G2 M.2 PCIe Adapter | Zeroth Oughts</title><meta name=keywords content="nas,pcie,nvme,hardware,hacking"><meta name=description content="This HP card mounts in a PCIe expansion slot and provides a M.2 NVME socket. But then it gets weird - HP locked these so they could only be used with HP Z4x0s. Or did they?"><meta name=author content="Voytek Jarnot"><link rel=canonical href=https://vjarnot.github.io/posts/2023-02-27-hp-zturbog2-modding/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ddeb19fa2caa6d0ac0f8e94a1db2f42c315767048c1d58ccd104ce65daccdc26.css integrity="sha256-3esZ+iyqbQrA+OlKHbL0LDFXZwSMHVjM0QTOZdrM3CY=" rel="preload stylesheet" as=style><link rel=icon href=https://vjarnot.github.io/favicon.ico><link rel=apple-touch-icon href=https://vjarnot.github.io/apple-touch-icon.png><meta name=twitter:title content="Modding the HP Z Turbo G2 M.2 PCIe Adapter | Zeroth Oughts"><meta name=twitter:description content="This HP card mounts in a PCIe expansion slot and provides a M.2 NVME socket. But then it gets weird - HP locked these so they could only be used with HP Z4x0s. Or did they?"><meta property="og:title" content="Modding the HP Z Turbo G2 M.2 PCIe Adapter | Zeroth Oughts"><meta property="og:description" content="This HP card mounts in a PCIe expansion slot and provides a M.2 NVME socket. But then it gets weird - HP locked these so they could only be used with HP Z4x0s. Or did they?"><meta property="og:type" content="article"><meta property="og:url" content="https://vjarnot.github.io/posts/2023-02-27-hp-zturbog2-modding/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-27T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-27T00:00:00+00:00"><meta property="og:site_name" content="Zeroth Oughts"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://vjarnot.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Modding the HP Z Turbo G2 M.2 PCIe Adapter","item":"https://vjarnot.github.io/posts/2023-02-27-hp-zturbog2-modding/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Modding the HP Z Turbo G2 M.2 PCIe Adapter | Zeroth Oughts","name":"Modding the HP Z Turbo G2 M.2 PCIe Adapter","description":"This HP card mounts in a PCIe expansion slot and provides a M.2 NVME socket. But then it gets weird - HP locked these so they could only be used with HP Z4x0s. Or did they?","keywords":["nas","pcie","nvme","hardware","hacking"],"wordCount":"436","inLanguage":"en","datePublished":"2023-02-27T00:00:00Z","dateModified":"2023-02-27T00:00:00Z","author":{"@type":"Person","name":"Voytek Jarnot"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://vjarnot.github.io/posts/2023-02-27-hp-zturbog2-modding/"},"publisher":{"@type":"Organization","name":"Zeroth Oughts","logo":{"@type":"ImageObject","url":"https://vjarnot.github.io/favicon.ico"}}}</script><script async defer src=https://analytics.umami.is/script.js data-website-id=aba68152-cb5d-4202-a2c9-f09af7eb1639></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="light",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://vjarnot.github.io/ accesskey=h title="Zeroth Oughts (Alt + H)">Zeroth Oughts</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://vjarnot.github.io/archives/ title=Archives>Archives</a></li><li><a href=https://vjarnot.github.io/tags/ title=Tags>Tags</a></li><li><a href=https://vjarnot.github.io/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><h1 class=post-title>Modding the HP Z Turbo G2 M.2 PCIe Adapter</h1><div class=post-description>This HP card mounts in a PCIe expansion slot and provides a M.2 NVME socket. But then it gets weird - HP locked these so they could only be used with HP Z4x0s. Or did they?</div><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>February 27, 2023</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://vjarnot.github.io/tags/nas/>nas</a><a href=https://vjarnot.github.io/tags/pcie/>pcie</a><a href=https://vjarnot.github.io/tags/nvme/>nvme</a><a href=https://vjarnot.github.io/tags/hardware/>hardware</a><a href=https://vjarnot.github.io/tags/hacking/>hacking</a></span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg>
<span>436 words</span></span></div></header><div class="toc side left"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#modding-the-hp-z-turbo-g2-m2-pcie-adapter aria-label="Modding the HP Z Turbo G2 M.2 PCIe Adapter">Modding the HP Z Turbo G2 M.2 PCIe Adapter</a><ul><li><a href=#why-though aria-label="Why, though?">Why, though?</a></li><li><a href=#so-whats-the-modification aria-label="So, what&amp;rsquo;s the modification?">So, what&rsquo;s the modification?</a></li><li><a href=#results-results aria-label="Results? Results!">Results? Results!</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=modding-the-hp-z-turbo-g2-m2-pcie-adapter>Modding the HP Z Turbo G2 M.2 PCIe Adapter<a hidden class=anchor aria-hidden=true href=#modding-the-hp-z-turbo-g2-m2-pcie-adapter>¶</a></h2><p><img loading=lazy src=/posts/2023-02-27-hp-zturbog2-modding/hp-card-finished.jpg type alt="The End Result"></p><h3 id=why-though>Why, though?<a hidden class=anchor aria-hidden=true href=#why-though>¶</a></h3><p>PCIe cards which take a NVME &lsquo;drive&rsquo; - allowing you to add NVME storage even if you&rsquo;re out of M.2 slots (or never had any) - aren&rsquo;t rare or expensive.
They tend to run in the $50 range. The HP card in question here is about a decade old and can be had for about $12 on eBay. However, <strong>however</strong>, <em><strong>HOWEVER</strong></em>: HP -
in their infinite idiocy - actually spent money and time making sure this particular card wouldn&rsquo;t work outside of a HP Z4xx workstation.</p><p>I <em>intentionally</em> purchased one of these locked cards on eBay - not for the savings - they&rsquo;re not significant enough to take a gamble on used hardware. No, <strong>I bought this
card specifically due to this forum post:</strong> <a href=https://forums.servethehome.com/index.php?threads/need-help-with-hp-z-turbo-drive-g2-512gb.21195/ target=_blank rel=noopener>https://forums.servethehome.com/index.php?threads/need-help-with-hp-z-turbo-drive-g2-512gb.21195/</a></p><p>This, folks, is what made/makes the internet wonderful: a ludicrously niche and esoteric problem posted on a forum, with an absolutely mind-boggling solution posted almost immediately thereafter.</p><p>Allow me to quote obrith from the link above:</p><blockquote><p>We ordered a batch of Z420&rsquo;s in with these cards and some users didn&rsquo;t want the PCIe slot taken up so we ended up with pulls we wanted to use elsewhere.
You have to remove the Q1 transistor. The card just constantly resets unless the computer sends a command to stop resetting (only the listed HP models will do that)
unless you physically disable the &lsquo;feature&rsquo;.</p></blockquote><p>Seriously though, <a href=https://forums.servethehome.com/index.php?threads/need-help-with-hp-z-turbo-drive-g2-512gb.21195/ target=_blank rel=noopener>read the thread</a>
, it really <em>is</em> what makes the internet great.</p><p>So, why? That&rsquo;s why - to actively enjoy and support this type of information exchange and hardware hacking.</p><h3 id=so-whats-the-modification>So, what&rsquo;s the modification?<a hidden class=anchor aria-hidden=true href=#so-whats-the-modification>¶</a></h3><p><img loading=lazy src=/posts/2023-02-27-hp-zturbog2-modding/Inkedhp-card-before_LI.jpg type alt="HP NVME Card Before"></p><p>That circled component has to go. I don&rsquo;t have pictures of the process because a) I only have two hands and b) nobody should have to watch me wield a soldering iron.
That said, the process is relatively simple - heat up the connections (3 in this case) with the soldering iron tip, and simultaneously pull on the component (tweezers come in handy).</p><p><img loading=lazy src=/posts/2023-02-27-hp-zturbog2-modding/Inkedhp-card-after_LI.jpg type alt="HP NVME Card After"></p><h3 id=results-results>Results? Results!<a hidden class=anchor aria-hidden=true href=#results-results>¶</a></h3><p>It works! This part is very boring - the card does what it is supposed to do. I bought this card to go into a computer that only has a PCIe 2.0 x4 slot available, so I bought a
very cheap NVME drive for it, because I won&rsquo;t end up getting full NVME speeds from PCIe 2.0 anyway, therefore the drive doesn&rsquo;t need to be particularly fast. Fast for an NVME, that is, this
thing is still hugely faster than SATA SSDs. So this benchmark was less about speed, and more about whether it works or not:</p><p><img loading=lazy src=/posts/2023-02-27-hp-zturbog2-modding/2023-02-28-155913-crystaldiskmark-hpnvmekingston.png type alt="CrystalDiskMark Results"></p></div><footer class=post-footer><nav class=paginav><a class=next href=https://vjarnot.github.io/posts/2023-02-12-supermicro-lsi-hba-plus-noctua/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>Supermicro AOC-S3008L-L8E + Noctua NF-A4x20</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://vjarnot.github.io/>Zeroth Oughts</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></span>
<span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script>mediumZoom(".entry-cover img"),mediumZoom(".post-content img:not([no-zoom])")</script></body></html>